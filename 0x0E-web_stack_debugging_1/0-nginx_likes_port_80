#!/usr/bin/env bash

# Check Nginx configuration for port 80
if ! grep -q "listen\s*80;" /etc/nginx/sites-enabled/default; then
    sed -i 's/\(listen\s*\)80;/\180;/g' /etc/nginx/sites-enabled/default
fi

# Check Nginx status
if ! service nginx status | grep -q "active (running)"; then
    service nginx restart
fi

# Check port 80 availability
if ! nc -z localhost 80; then
    echo "Nginx is not listening on port 80"
    exit 1
fi

echo "Nginx is now listening on port 80"

